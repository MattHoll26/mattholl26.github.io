<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Dean.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">core</a> &gt; <a href="index.source.html" class="el_package">io.github.some_example_name</a> &gt; <span class="el_source">Dean.java</span></div><h1>Dean.java</h1><pre class="source lang-java linenums">package io.github.some_example_name;

import com.badlogic.gdx.graphics.Texture;
import com.badlogic.gdx.graphics.g2d.SpriteBatch;
import com.badlogic.gdx.math.Rectangle;
import com.badlogic.gdx.math.Vector2;

/**
 * EXTENDED
 *
 * &lt;code&gt; Dean &lt;/code&gt; is the main enemy of the game, which chases the player's
 * character to attempt to attack them, resetting them to the start of the game.
 */

public class Dean {
	private Vector2 position;
	private Vector2 startPosition;
	private Vector2 velocity;
	private Texture texture;
	private Player player;
	private GameScreen gameScreen;
<span class="fc" id="L22">	private float speed = 0.7f;</span>

	/**
     * UNCHANGED
	 * Constructor for &lt;code&gt; Dean &lt;/code&gt;, with a set of coordinates.
	 * @param x Horizontal position for dean to spawn in.
	 * @param y Vertical position for dean to spawn in.
	 * @param player Player class to follow.
	 * @param gameScreen Screen rendering the game.
	 */
<span class="fc" id="L32">	public Dean(float x, float y, Player player, GameScreen gameScreen){</span>
<span class="fc" id="L33">		this.position = new Vector2(x, y);</span>
<span class="fc" id="L34">		this.startPosition = new Vector2(x,y); //store the starting position of the dean</span>
<span class="fc" id="L35">		this.texture = new Texture(&quot;Dean-front.png&quot;);</span>
<span class="fc" id="L36">		this.player = player;</span>
<span class="fc" id="L37">		this.gameScreen = gameScreen;</span>
<span class="fc" id="L38">		this.velocity = new Vector2();</span>
<span class="fc" id="L39">	}</span>

    /**
     * NEW
     *
     * Set the movement speed of the dean.
     * @param newSpeed New speed value for the dean.
     */
    public void setSpeed(float newSpeed) {
<span class="fc" id="L48">        this.speed = newSpeed;</span>
<span class="fc" id="L49">    }</span>

    /**
     * NEW
     * Return the current movement speed of the dean.
     * @return Current speed value.
     */
    public float getSpeed() {
<span class="fc" id="L57">        return speed;</span>
    }

	/**
     * EXTENDED
	 * Update position of dean to get closer to player's new position.
	 * @param delta Time elapsed since last update.
	 */
	public void update(float delta) {
<span class="fc" id="L66">		Vector2 direction = new Vector2(player.getPosition()).sub(position);</span>
<span class="fc" id="L67">		direction.nor(); //normalise</span>

<span class="fc" id="L69">		float newX = position.x + direction.x * speed;</span>
<span class="fc" id="L70">		float newY = position.y + direction.y * speed;</span>

<span class="pc bpc" id="L72" title="1 of 2 branches missed.">		if(!gameScreen.isCellBlockedForDean(newX, newY)) {</span>
<span class="fc" id="L73">		    position.set(newX, newY);</span>
		}

<span class="fc" id="L76">		tryMoveDiagonally(delta, direction);</span>
<span class="fc" id="L77">	}</span>

	/**
     * EXTENDED
	 * Attempt to move dean diagonally towards player if moving
	 * in a straight line is not possible.
	 * @param delta Time elapsed since last update.
	 * @param direction 2D Vector for position of player.
	 */
	private void tryMoveDiagonally(float delta, Vector2 direction){
<span class="fc" id="L87">		float newX = position.x + direction.x * speed;</span>
<span class="pc bpc" id="L88" title="1 of 2 branches missed.">		if(!gameScreen.isCellBlockedForDean(newX, position.y)) {</span>
<span class="fc" id="L89">		    position.x = newX;</span>
<span class="fc" id="L90">		    return;</span>
		}

<span class="nc" id="L93">		float newY = position.y + direction.y * speed;</span>
<span class="nc bnc" id="L94" title="All 2 branches missed.">		 if(!gameScreen.isCellBlockedForDean(position.x, newY)) {</span>
<span class="nc" id="L95">		    position.y = newY;</span>
<span class="nc" id="L96">		    return;</span>
		}
<span class="nc" id="L98">	}</span>

    /**
     * EXTENDED JAVADOC
     * Reset the dean to its starting position when the player is caught,
     * or move it to an alternative position to avoid spawn camping.
     *
     * @param caughtNumber Number of times the player has been caught by the dean.
     */
	public void resetToStart(int caughtNumber) {
<span class="fc bfc" id="L108" title="All 2 branches covered.">		if (caughtNumber % 2 == 0){</span>
			//if the number of times caught by the dean is even send them to a new positon than their starting, otherwise send them to the start
<span class="fc" id="L110">			position.set(startPosition);</span>
		}else{
<span class="fc" id="L112">			position.set(690, 560);</span>
		}
<span class="fc" id="L114">	}</span>




	/**
     * UNCHANGED
	 * Convenience method to be called by the game screen's &lt;code&gt; render()
	 * &lt;/code&gt; method, to draw the dean using a SpriteBatch at the current
	 * dean coordinates.
	 * @param batch SpriteBatch used by application to render all sprites.
	 * @see com.badlogic.gdx.graphics.g2d.SpriteBatch SpriteBatch
	 * @see com.badlogic.gdx.Screen#render Screen.render().
	 */
	public void render(SpriteBatch batch) {
<span class="nc" id="L129">		batch.draw(texture, position.x, position.y, 16, 16);</span>
<span class="nc" id="L130">	}</span>

	/**
     * UNCHANGED
	 * Return 2D coordinates of dean.
	 * @return 2D Vector x-by-y position of dean.
	 */
<span class="fc" id="L137">	public Vector2 getPosition() {return position; }</span>

	/**
     * UNCHANGED
	 * Return rectangle representing collision bounds of dean.
	 * @return Rectangle collision box.
	 */
<span class="fc" id="L144">	public Rectangle getBounds() { return new Rectangle(position.x, position.y, 16,16); }</span>

	/**
     * UNCHANGED
	 * Convenience method to be called by application to dispose of textures
	 * of player's sprites when the application's dispose method is called.
	  @see com.badlogic.gdx.Screen#dispose Screen.dispose().
	 */
	public void dispose() {
<span class="nc" id="L153">		texture.dispose();</span>
<span class="nc" id="L154">	}</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.10.202304240956</span></div></body></html>